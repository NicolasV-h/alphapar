(this.webpackJsonpalphapar=this.webpackJsonpalphapar||[]).push([[0],{319:function(e,t,n){e.exports={container:"notfound_container__1WjCO"}},343:function(e,t,n){},344:function(e,t,n){},377:function(e,t){},379:function(e,t){},419:function(e,t){},420:function(e,t){},554:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(1),i=n(25),r=n.n(i),s=(n(343),n(344),n(345),n(605)),l=n(603),o=n(40),d=n(44),u=n.p+"static/media/logo.cf6a6749.png",j=n(17),m=n(20),b=n.n(m),h=Object(c.createContext)();function p(e){var t=e.children,n=function(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),a=n[0],i=n[1];return{user:a,signin:function(e){return localStorage.setItem("user_token",e),!0},signup:function(e,t){return b.a.post("/api/users/register",{email:e,password:t}).then((function(e){localStorage.setItem("user_token",e.data.access_token)}))},signout:function(e){localStorage.removeItem("user_token"),window.location.reload(!1)},setUser:i}}();return Object(a.jsx)(h.Provider,{value:n,children:t})}var O=function(){return Object(c.useContext)(h)};function x(){var e=O(),t=Object(o.g)(),n=function(){return null===localStorage.getItem("user_token")?Object(a.jsx)(d.b,{to:"/authentification",exact:!0,className:"nav-link",children:"Log in"}):Object(a.jsx)(d.b,{className:"nav-link",exact:!0,onClick:e.signout,to:"/",children:"Logout"})};return Object(a.jsxs)(s.a,{expand:"lg",className:"/"===t.pathname?"backgroundWhite":"",children:[Object(a.jsx)("div",{children:Object(a.jsx)(d.b,{to:"/",className:"nav-link",style:{backgroundColor:"white"},children:Object(a.jsx)("img",{src:u,alt:"logo"})})}),Object(a.jsx)(s.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(s.a.Collapse,{id:"basic-navbar-nav",children:Object(a.jsxs)(l.a,{className:"mr-auto",children:[Object(a.jsx)(d.b,{to:"/clients",className:"nav-link",children:"Clients"}),Object(a.jsx)(d.b,{to:"/pieces",className:"nav-link",children:"Pi\xe8ces"}),Object(a.jsx)(d.b,{to:"/modules",className:"nav-link",children:"Modules"}),Object(a.jsx)(n,{})]})})]})}var f=n(594),g=n(607),v=n(598),N=n(592),y=n(589),C=n(180),w=n(234),S=function(e,t){var n=Object(c.useState)({}),a=Object(j.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)({}),l=Object(j.a)(s,2),o=l[0],d=l[1],u=Object(c.useState)(!1),m=Object(j.a)(u,2),b=m[0],h=m[1];Object(c.useEffect)((function(){0===Object.keys(o).length&&b&&e()}),[o]);return{handleChange:function(e){e.persist(),r((function(t){return Object(w.a)(Object(w.a)({},t),{},Object(C.a)({},e.target.name,e.target.value))}))},handleSubmit:function(e){e&&e.preventDefault(),d(t(i)),h(!0)},values:i,errors:o}};function k(e){var t={};return e.pieceName||(t.pieceName="Le nom de la pi\xe8ce est obligatoire"),e.piecePrice||(t.piecePrice="Le prix de la pi\xe8ce est obligatoire"),t}function P(){var e=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(),t=S((function(){var e={name:n.pieceName,price:n.piecePrice};b.a.post("/piece",e).then((function(e){null!==e.data&&window.location.reload(!1)})).catch((function(e){alert(e)}))}),k),n=t.values,c=t.errors,i=t.handleChange,r=t.handleSubmit;return Object(a.jsxs)(N.a,{component:"main",maxWidth:"xs",className:"add-client",children:[Object(a.jsx)(f.a,{}),Object(a.jsx)("div",{children:Object(a.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:r,children:[Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(g.a,{className:"input",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"pieceName",label:"Nom pi\xe8ce",name:"pieceName",autoComplete:"pieceName",autoFocus:!0,type:"name",onChange:i,value:n.pieceName||""}),c.pieceName&&Object(a.jsx)("p",{className:"help is-danger",children:c.pieceName})]}),Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(g.a,{className:"input",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"piecePrice",label:"Prix pi\xe8ce",name:"piecePrice",autoComplete:"piecePrice",type:"name",onChange:i,value:n.piecePrice||""}),c.piecePrice&&Object(a.jsx)("p",{className:"help is-danger",children:c.piecePrice})]}),Object(a.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Ajouter une pi\xe8ce"})]})})]})}function _(){var e=Object(o.f)(),t=Object(c.useState)(null),n=Object(j.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(!1),l=Object(j.a)(s,2),d=l[0],u=l[1];Object(c.useEffect)((function(){localStorage.getItem("user_token")?b.a.get("/piece").then((function(e){r(e.data)})).catch((function(e){alert(e)})):e.push("/authentification")}),[]);var m=function(){return i?i.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:e.name}),Object(a.jsx)("td",{children:e.price})]},e.name)})):Object(a.jsx)("tr",{children:Object(a.jsx)("th",{children:"Aucune pi\xe8ce n'est disponible pour le moment !!"})})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"d-flex justify-content-center flex-column align-items-center",children:[Object(a.jsx)("button",{className:"btn-basic btn-basic-sm my-3",onClick:function(){return u(!d)},children:"Ajouter une pi\xe8ce"}),d?Object(a.jsx)(P,{}):null]}),Object(a.jsxs)("table",{className:"table table-hover",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Description"}),Object(a.jsx)("th",{scope:"col",children:"Prix"})]})}),Object(a.jsx)("tbody",{children:Object(a.jsx)(m,{})})]})]})}var I=n(133);function A(e){var t={};return e.planName||(t.planName="Le nom du plan est obligatoire"),t}var E=n(608),W=n(602),q=n(609),T=n(597);function F(e){var t=Object(c.useState)(1),n=Object(j.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)([1]),l=Object(j.a)(s,2),o=l[0],d=l[1],u=Object(c.useState)([""]),m=Object(j.a)(u,2),h=m[0],p=m[1],O=[],x=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(),f=function(e){var t=e.i;return i===t?Object(a.jsx)(v.a,{type:"button",variant:"contained",color:"primary",className:"small-button px-2",onClick:function(){r(i+1),p((function(e){return[].concat(Object(I.a)(e),[""])})),d((function(e){return[].concat(Object(I.a)(e),[1])}))},children:"+"}):Object(a.jsx)(v.a,{type:"button",variant:"contained",color:"primary",className:"small-button red px-2",onClick:function(){return function(e){r(i-1),d((function(t){return t.filter((function(t,n){return e!==n}))})),p((function(t){return t.filter((function(t,n){return e!==n}))}))}(t)},children:"-"})},C=function(){for(var t=function(t){O.push(Object(a.jsxs)("div",{className:"control d-flex justify-content-between align-items-center",children:[Object(a.jsxs)(T.a,{className:x.formControl+" w-100",children:[Object(a.jsx)(E.a,{id:"demo-simple-select-label",children:"Choisissez une pi\xe8ce"}),Object(a.jsx)(W.a,{labelId:"demo-simple-select-label",id:"modulePieceName"+t,value:h[t-1]||"",onChange:function(e){return function(e,t){p(h.map((function(n,a){return a===t-1?e.target.value:n})))}(e,t)},name:"modulePieceName"+t,type:"name",children:e.pieces.map((function(e){return Object(a.jsx)(q.a,{value:e.id,children:e.name},"piece"+e.name)}))})]}),Object(a.jsx)("div",{className:x.formControl+" w-100 px-5 d-flex justify-content-center align-items-center",children:Object(a.jsx)(g.a,{className:"input px-2",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"modulePieceQuantity"+t,label:"Quantit\xe9",name:"modulePieceQuantity"+t,type:"text",onChange:function(e){return function(e,t){d(o.map((function(n,a){return a===t-1?e.target.value:n})))}(e,t)},value:o[t-1]||""})}),Object(a.jsx)(f,{i:t})]},["piecesNumber",t].join("_")))},n=1;n<i+1;n++)t(n);return O},w=S((function(){var e={name:k.planName,pieces:[]};h.map((function(t,n){return e.pieces.push({piece_id:t,quantity:parseInt(o[n])})})),b.a.post("/plan",e).then((function(e){null!==e.data&&window.location.reload(!1)})).catch((function(e){alert(e)}))}),A),k=w.values,P=w.errors,_=w.handleChange,F=w.handleSubmit;return Object(a.jsx)(N.a,{component:"main",maxWidth:"sm",className:"add-client",children:Object(a.jsxs)("form",{className:x.form,noValidate:!0,onSubmit:F,children:[Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(g.a,{className:"input",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"planName",label:"Nom du module",name:"planName",autoComplete:"planName",autoFocus:!0,type:"name",onChange:_,value:k.planName||""}),P.planName&&Object(a.jsx)("p",{className:"help is-danger",children:P.planName})]}),Object(a.jsx)(C,{}),Object(a.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:x.submit,children:"Ajouter le module"})]})})}var D=function(){var e=Object(o.f)(),t=Object(c.useState)(!1),n=Object(j.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(null),l=Object(j.a)(s,2),d=l[0],u=l[1],m=Object(c.useState)(null),h=Object(j.a)(m,2),p=h[0],O=h[1];return Object(c.useEffect)((function(){localStorage.getItem("user_token")?(b.a.get("/piece").then((function(e){u(e.data)})).catch((function(e){alert(e)})),b.a.get("/plan").then((function(e){O(e.data)})).catch((function(e){alert(e)}))):e.push("/authentification")}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"d-flex justify-content-center flex-column align-items-center",children:[Object(a.jsx)("button",{className:"btn-basic btn-basic-sm my-3",onClick:function(){return r(!i)},children:"Ajouter un module"}),i?Object(a.jsx)(F,{pieces:d}):null]}),Object(a.jsxs)("table",{className:"table table-hover",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Nom"}),Object(a.jsx)("th",{scope:"col",children:"Nom pi\xe8ce (Quantit\xe9)"}),Object(a.jsx)("th",{scope:"col",children:"Prix"})]})}),Object(a.jsx)("tbody",{children:p?p.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:e.name}),Object(a.jsx)("td",{children:e.pieces.map((function(e){return e.name+" ("+e.quantity+")"})).join(", ")}),Object(a.jsx)("td",{children:e.pieces.reduce((function(e,t){return e+t.unit_price*t.quantity}),0)})]},e.id)})):null})]})]})};function B(e){var t={};return e.clientName||(t.clientName="Client name is required"),e.clientPhone||(t.clientPhone="Client phone is required"),e.clientAddress||(t.clientAddress="Client address is required"),e.clientEmail||(t.clientEmail="Client email is required"),t}function Q(){var e=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(),t=S((function(){var e={name:n.clientName,email:n.clientEmail,address:n.clientAddress,phone:n.clientPhone};b.a.post("/client",e).then((function(e){null!==e.data&&window.location.reload(!1)})).catch((function(e){alert(e)}))}),B),n=t.values,c=t.errors,i=t.handleChange,r=t.handleSubmit;return Object(a.jsxs)(N.a,{component:"main",maxWidth:"xs",className:"add-client",children:[Object(a.jsx)(f.a,{}),Object(a.jsx)("div",{children:Object(a.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:r,children:[Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(g.a,{className:"input",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"clientPhone",label:"Num\xe9ro de t\xe9l\xe9phone",name:"clientPhone",autoComplete:"clientPhone",autoFocus:!0,type:"name",onChange:i,value:n.clientPhone||""}),c.clientPhone&&Object(a.jsx)("p",{className:"help is-danger",children:c.clientPhone})]}),Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(g.a,{className:"input",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"clientEmail",label:"Adresse Email",name:"clientEmail",autoComplete:"clientEmail",type:"name",onChange:i,value:n.clientEmail||""}),c.clientEmail&&Object(a.jsx)("p",{className:"help is-danger",children:c.clientEmail})]}),Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(g.a,{className:"input",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"clientAddress",label:"Adresse",name:"clientAddress",autoComplete:"clientAddress",type:"name",onChange:i,value:n.clientAddress||""}),c.clientAddress&&Object(a.jsx)("p",{className:"help is-danger",children:c.clientAddress})]}),Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(g.a,{className:"input",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"clientName",label:"Nom entreprise",name:"clientName",autoComplete:"clientName",type:"name",onChange:i,value:n.clientName||""}),c.clientName&&Object(a.jsx)("p",{className:"help is-danger",children:c.clientName})]}),Object(a.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Ajouter le client"})]})})]})}var z=n(606),V=n(317),L=n.n(V),M=n(601),U=n(600),R=n(610),H=n(599),K=n(604);function G(e){var t=Object(c.useState)(),n=Object(j.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(""),l=Object(j.a)(s,2),o=l[0],d=l[1],u=Object(c.useState)("0"),m=Object(j.a)(u,2),h=m[0],p=m[1];Object(c.useEffect)((function(){b.a.get("/order").then((function(t){return t.data.filter((function(t){return t.client_id===e.id}))})).then((function(e){r(e)})).catch((function(e){console.log("erreur, veuillez contacter Bigoune")}))}),[]);var O=Object(y.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:250},selectEmpty:{marginTop:e.spacing(2)}}}))();return Object(a.jsx)(M.a,{show:e.showInvoice,onHide:function(){return e.setShowInvoice(!1)},children:Object(a.jsxs)("form",{noValidate:!0,onSubmit:function(e){e.preventDefault();var t={order_id:o,paid:h};b.a.post("/invoice",t).then((function(e){null!==e.data&&window.location.reload(!1)})).catch((function(e){alert(e)}))},children:[Object(a.jsx)(M.a.Header,{closeButton:!0,children:Object(a.jsx)(M.a.Title,{children:"Cr\xe9er une facture"})}),Object(a.jsxs)(M.a.Body,{children:[Object(a.jsxs)(T.a,{className:O.formControl,children:[Object(a.jsx)(E.a,{id:"demo-mutiple-chip-label",children:"Commandes"}),Object(a.jsx)(W.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o,onChange:function(e){d(e.target.value)},children:i?i.map((function(e){return Object(a.jsxs)(q.a,{value:e.id,children:["Commande n",e.id]},e.id)})):null})]}),Object(a.jsx)(T.a,{className:O.formControl,children:Object(a.jsxs)(R.a,{"aria-label":"isOrderPaid",name:"isOrderPaid",value:h,onChange:function(e){return p(e.target.value)},children:[Object(a.jsx)(H.a,{value:"0",control:Object(a.jsx)(K.a,{}),label:"Non pay\xe9e"}),Object(a.jsx)(H.a,{value:"1",control:Object(a.jsx)(K.a,{}),label:"Pay\xe9"})]})})]}),Object(a.jsxs)(M.a.Footer,{children:[Object(a.jsx)(U.a,{variant:"secondary",onClick:function(){return e.setShowInvoice(!1)},children:"Fermer"}),Object(a.jsx)(U.a,{type:"submit",variant:"contained",color:"primary",className:O.submit,children:"Cr\xe9er"})]})]})})}var J=n(316),X=n.n(J);function Y(e){var t=Object(c.useState)(1),n=Object(j.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)([1]),l=Object(j.a)(s,2),o=l[0],d=l[1],u=Object(c.useState)(null),m=Object(j.a)(u,2),h=m[0],p=m[1],O=Object(c.useState)([""]),x=Object(j.a)(O,2),f=x[0],v=x[1],N=[];Object(c.useEffect)((function(){b.a.get("/plan").then((function(e){p(e.data)})).catch((function(e){alert(e)}))}),[]);var C=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(),w=function(e){var t=e.i;return i===t?Object(a.jsx)(U.a,{type:"button",variant:"contained",color:"primary",className:"small-button px-2 blue",onClick:function(){r(i+1),v((function(e){return[].concat(Object(I.a)(f),[""])})),d((function(e){return[].concat(Object(I.a)(e),[1])}))},children:"+"}):Object(a.jsx)(U.a,{type:"button",variant:"contained",color:"primary",className:"small-button red px-2",onClick:function(){return function(e){r(i-1),d((function(t){return t.filter((function(t,n){return e!==n}))})),v((function(t){return t.filter((function(t,n){return e!==n}))}))}(t)},children:"-"})},S=function(e){if(!h)return!1;for(var t=function(e){N.push(Object(a.jsxs)("div",{className:"control d-flex justify-content-between align-items-center",children:[Object(a.jsxs)(T.a,{className:C.formControl+"  px-3",children:[Object(a.jsx)(E.a,{id:"demo-simple-select-label",children:"Choisissez un plan"}),Object(a.jsx)(W.a,{labelId:"demo-simple-select-label",id:"modulePlanName"+e,value:f[e-1]||"",onChange:function(t){return function(e,t){v(f.map((function(n,a){return a===t-1?e.target.value:n})))}(t,e)},name:"modulePlanName"+e,type:"name",style:{minWidth:"300px"},children:h.map((function(e){return Object(a.jsx)(q.a,{value:e.id,children:e.name},e.id)}))})]}),Object(a.jsx)("div",{className:C.formControl+" px-3 d-flex justify-content-center align-items-center",children:Object(a.jsx)(g.a,{className:"input px-2",variant:"outlined",margin:"normal",required:!0,id:"modulePlanQuantity",label:"Quantit\xe9",name:"modulePlanQuantity",type:"text",onChange:function(t){return function(e,t){d(o.map((function(n,a){return a===t-1?e.target.value:n})))}(t,e)},value:o[e-1]||""})}),Object(a.jsx)(w,{i:e})]},["planNumber",e].join("_")))},n=1;n<i+1;n++)t(n);return N};return Object(a.jsx)(M.a,{show:e.showOrder,onHide:function(){return e.setShowOrder(!1)},size:"lg",children:Object(a.jsxs)("form",{noValidate:!0,onSubmit:function(t){t.preventDefault();var n={client_id:e.id,plans:[]};f.map((function(e,t){return n.plans.push({plan_id:e,quantity:parseInt(o[t])})})),b.a.post("/order",n).then((function(e){null!==e.data&&window.location.reload(!1)})).catch((function(e){alert(e)}))},children:[Object(a.jsx)(M.a.Header,{closeButton:!0,children:Object(a.jsx)(M.a.Title,{children:"Cr\xe9er une commande"})}),Object(a.jsx)(M.a.Body,{children:Object(a.jsx)(S,{})}),Object(a.jsxs)(M.a.Footer,{children:[Object(a.jsx)(U.a,{variant:"secondary",onClick:function(){return e.setShowOrder(!1)},children:"Fermer"}),Object(a.jsx)(U.a,{type:"submit",variant:"contained",color:"primary",className:C.submit,children:"Commander"})]})]})})}function Z(){var e=Object(o.f)(),t=Object(c.useState)(!1),n=Object(j.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(null),l=Object(j.a)(s,2),d=l[0],u=l[1],m=Object(c.useState)(null),h=Object(j.a)(m,2),p=h[0],O=h[1],x=Object(c.useState)(!1),f=Object(j.a)(x,2),g=f[0],v=f[1],N=Object(c.useState)(!1),C=Object(j.a)(N,2),w=C[0],S=C[1];Object(c.useEffect)((function(){localStorage.getItem("user_token")?b.a.get("/client").then((function(e){u(e.data)})).catch((function(e){alert(e)})):e.push("/authentification")}),[]);var k=Object(y.a)((function(e){return{avatar:{backgroundColor:"#3F51B5",cursor:"pointer"}}}))(),P=function(){return!!d&&(null===d||void 0===d?void 0:d.map((function(t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){return function(t){e.push({pathname:"/client/details",state:{client:t}})}(t)},children:t.name}),Object(a.jsx)("td",{children:t.address}),Object(a.jsx)("td",{children:t.email}),Object(a.jsx)("td",{children:t.phone}),Object(a.jsxs)("td",{className:"d-flex justify-content-center",children:[Object(a.jsx)(z.a,{className:k.avatar+" mx-2 blue",onClick:function(){v(!0),O(t.id)},children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(z.a,{className:k.avatar+" mx-2",onClick:function(){S(!0),O(t.id)},children:Object(a.jsx)(L.a,{})})]})]},t.name)})))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"d-flex justify-content-center flex-column align-items-center",children:[Object(a.jsx)("button",{className:"btn-basic btn-basic-sm my-3",onClick:function(){return r(!i)},children:"Ajouter un client"}),i?Object(a.jsx)(Q,{}):null]}),Object(a.jsxs)("table",{className:"table table-hover",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Nom"}),Object(a.jsx)("th",{scope:"col",children:"Adresse"}),Object(a.jsx)("th",{scope:"col",children:"Email"}),Object(a.jsx)("th",{scope:"col",children:"Phone"}),Object(a.jsx)("th",{scope:"col",children:"Actions"})]})}),Object(a.jsx)("tbody",{children:Object(a.jsx)(P,{})})]}),g?Object(a.jsx)(G,{showInvoice:g,setShowInvoice:v,id:p}):null,w?Object(a.jsx)(Y,{showOrder:w,setShowOrder:S,id:p}):null]})}var $=n(124),ee=n.n($),te=n(557);function ne(e){var t={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(t.email="Email address is invalid"):t.email="Email address is required",e.password?e.password.length<8&&(t.password="Password must be 8 or more characters"):t.password="Password is required",t}var ae=function(e){var t=O(),n=Object(c.useState)(""),i=Object(j.a)(n,2),r=i[0],s=i[1],l=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),o=S((function(){var e=new FormData;e.append("username",d.email),e.append("password",d.password),e.append("totp_token",r),b.a.post("/token",e).then((function(e){null!==e.data.access_token&&(t.signin(e.data.access_token),window.location.reload(!1))})).catch((function(e){console.log("erreur, veuillez contacter Bigoune")}))}),ne),d=o.values,u=o.errors,m=o.handleChange,h=o.handleSubmit,p=l();return Object(a.jsxs)(N.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(f.a,{}),Object(a.jsxs)("div",{className:p.paper,children:[Object(a.jsx)(z.a,{className:p.avatar,children:Object(a.jsx)(ee.a,{})}),Object(a.jsx)(te.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsxs)("form",{className:p.form,noValidate:!0,onSubmit:h,children:[Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(g.a,{className:"input ".concat(u.email&&"is-danger"),variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,type:"email",onChange:m,value:d.email||""}),u.email&&Object(a.jsx)("p",{className:"help is-danger",children:u.email})]}),Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:m,value:d.password||""}),u.password&&Object(a.jsx)("p",{className:"help is-danger",children:u.password})]}),Object(a.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"code",label:"Please enter the code from your authentication app",type:"text",id:"code",onChange:function(e){return s(e.currentTarget.value||null)}}),Object(a.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:p.submit,children:"Sign In"})]})]})]})},ce=n(318),ie=n.n(ce);function re(e){var t=Object(c.useState)(""),n=Object(j.a)(t,2),i=n[0],r=n[1],s=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(),l=function(t){t.preventDefault();var n=new FormData;n.append("username",e.email),n.append("password",e.password),n.append("totp_token",i),b.a.post("/token",n).then((function(e){null!==e.data.access_token&&(localStorage.setItem("user_token",e.data.access_token),window.location.reload(!1))})).catch((function(e){console.log("erreur, veuillez contacter bigoune")}))},o=function(){return"register"===e.type&&""!==e.urlQRCode?Object(a.jsx)(ie.a,{value:e.urlQRCode,className:"mt-5"}):Object(a.jsx)(a.Fragment,{})};return Object(a.jsx)("div",{children:Object(a.jsxs)(N.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(o,{}),Object(a.jsx)(f.a,{}),Object(a.jsxs)("div",{className:s.paper,children:[Object(a.jsx)(z.a,{className:s.avatar,children:Object(a.jsx)(ee.a,{})}),Object(a.jsx)(te.a,{component:"h1",variant:"h5",children:"Sign Up"}),Object(a.jsxs)("form",{className:s.form,noValidate:!0,onSubmit:l,children:[Object(a.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"code",label:"Please enter the code from your authentication app",type:"text",id:"code",onChange:function(e){return r(e.currentTarget.value||null)}}),Object(a.jsx)(v.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:s.submit,onClick:l,children:"Sign Up"})]})]})]})})}function se(e){O();var t=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),n=S((function(){var t={email:c.email,password:c.password};b.a.post("/register",t).then((function(t){null!==t.data&&(e.setUrlQRCode(t.data.totp_url),e.setType("register"),e.setIsIdentified(!0),e.setPassword(c.password),e.setEmail(c.email))}),(function(e){console.log("erreur, veuillez contacter Bigoune")}))}),ne),c=n.values,i=n.errors,r=n.handleChange,s=n.handleSubmit,l=t();return Object(a.jsxs)(N.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(f.a,{}),Object(a.jsxs)("div",{className:l.paper,children:[Object(a.jsx)(z.a,{className:l.avatar,children:Object(a.jsx)(ee.a,{})}),Object(a.jsx)(te.a,{component:"h1",variant:"h5",children:"S'enregistrer"}),Object(a.jsxs)("form",{className:l.form,noValidate:!0,onSubmit:s,children:[Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(g.a,{className:"input ".concat(i.email&&"is-danger"),variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,type:"email",onChange:r,value:c.email||""}),i.email&&Object(a.jsx)("p",{className:"help is-danger",children:i.email})]}),Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:r,value:c.password||""}),i.password&&Object(a.jsx)("p",{className:"help is-danger",children:i.password})]}),Object(a.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:l.submit,children:"Sign In"})]})]})]})}function le(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),i=n[0],r=n[1],s=Object(c.useState)(!1),l=Object(j.a)(s,2),d=(l[0],l[1]),u=Object(o.f)(),m=Object(c.useState)(""),b=Object(j.a)(m,2),h=b[0],p=b[1],O=Object(c.useState)(""),x=Object(j.a)(O,2),f=x[0],g=x[1],v=Object(c.useState)(""),N=Object(j.a)(v,2),y=N[0],C=N[1],w=Object(c.useState)(""),S=Object(j.a)(w,2),k=S[0],P=S[1];return Object(c.useEffect)((function(){localStorage.getItem("user_token")&&u.push("/"),i&&u.push("/authentification/OtpVerification")}),[i]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(o.c,{children:[Object(a.jsx)(o.a,{path:"/authentification",exact:!0,children:Object(a.jsx)(ae,{setIsIdentified:r,setEmail:p,setPassword:g,setType:C})}),Object(a.jsx)(o.a,{path:"/authentification/OtpVerification",children:Object(a.jsx)(re,{setIsLoggedIn:d,password:f,email:h,type:y,urlQRCode:k})}),Object(a.jsx)(o.a,{path:"/authentification/register",children:Object(a.jsx)(se,{setType:C,setIsIdentified:r,setUrlQRCode:P,setPassword:g,setEmail:p})})]})})}var oe=n(319),de=n.n(oe);var ue=function(e){return Object(a.jsx)("div",{className:de.a.container,children:Object(a.jsx)("h1",{children:"Page not found SKUSKUSKU BIGOUNE"})})};var je=function(){var e=function(){return null===localStorage.getItem("user_token")?Object(a.jsxs)("div",{className:"homeButtons",children:[Object(a.jsx)("button",{className:"btn-basic",children:Object(a.jsx)(d.b,{to:"/authentification",className:"nav-link",children:"Se connecter"})}),Object(a.jsx)("button",{className:"btn-basic",children:Object(a.jsx)(d.b,{to:"/authentification/register",className:"nav-link",children:"S'enregistrer"})})]}):Object(a.jsx)("div",{className:"welcome-container",children:Object(a.jsx)("h2",{children:"G00d h4@K"})})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"home"}),Object(a.jsxs)("div",{className:"homeText",children:[Object(a.jsx)("h1",{children:"AlphaPar"}),Object(a.jsx)("h6",{className:"mt-4",children:"Fabrication de module pour centrale \xe9lectrique et nucl\xe9aire"})]}),Object(a.jsx)(e,{})]})},me=n(556);function be(e){var t={};return e.clientMessage||(t.clientMessage="Le message est obligatoire"),t}var he=function(e){return new Date(e).toDateString()};function pe(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),i=n[0],r=n[1];Object(c.useEffect)((function(){b.a.get("/message").then((function(t){return t.data.filter((function(t){return t.client_id===e.id}))})).then((function(e){r(e)})).catch((function(e){console.log("erreur, veuillez contacter Bigoune")}))}),[]);var s=Object(y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(),l=S((function(){var t={client_id:e.id,content:o.clientMessage};b.a.post("/message",t).then((function(e){null!==e.data&&window.location.reload(!1)})).catch((function(e){alert(e)}))}),be),o=l.values,d=l.errors,u=l.handleChange,m=l.handleSubmit,h=function(){return!!i&&Object(a.jsx)("div",{className:"d-flex align-items-start flex-column",children:null===i||void 0===i?void 0:i.map((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:["Envoy\xe9 le : ",he(e.sent_at)]}),Object(a.jsx)("p",{style:{textAlign:"left"},children:e.content})]},e.id)}))})};return Object(a.jsxs)(N.a,{component:"main",maxWidth:"xs",className:"add-client chat-container",children:[Object(a.jsx)(f.a,{}),Object(a.jsxs)("form",{className:s.form,noValidate:!0,onSubmit:m,children:[Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)(me.a,{className:"input form-control",variant:"outlined",margin:"normal",required:!0,id:"clientMessage",label:"Message",name:"clientMessage",autoComplete:"clientMessage",autoFocus:!0,type:"textarea",onChange:u,placeholder:"Message"}),d.clientMessage&&Object(a.jsx)("p",{className:"help is-danger",children:d.clientMessage})]}),Object(a.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:s.submit,children:"Envoyer le message"})]}),Object(a.jsx)(h,{})]})}var Oe=n(37),xe=Oe.d.create({page:{flexDirection:"row",backgroundColor:"white",margin:20,padding:20},section:{flexGrow:1}}),fe=function(e){var t=e.plans.filter((function(t){return e.currentOrder.plans.map((function(e){return e.plan_id})).includes(t.id)}));return!!t&&t.map((function(t,n){return Object(a.jsxs)(Oe.f,{children:[Object(a.jsx)(Oe.f,{children:Object(a.jsxs)(Oe.e,{style:{backgroundColor:"tomato",width:"100vw",display:"block"},children:["Nom du plan : ",t.name,"\n"]})}),Object(a.jsxs)(Oe.e,{children:["Quantit\xe9 : ",e.currentOrder.plans[n].quantity,"\n"]}),Object(a.jsxs)(Oe.e,{children:["Prix : ",e.currentOrder.plans[n].price,"\n"]}),Object(a.jsxs)(Oe.e,{children:["Pi\xe8ce(s)","\n"]}),t.pieces.map((function(e,n){return Object(a.jsxs)(Oe.f,{className:"piece-container",style:{border:"solid blue 1px",margin:"5px"},children:[Object(a.jsxs)(Oe.e,{style:{backgroundColor:"blue"},children:[" Nom : ",e.name,"\n"]}),Object(a.jsxs)(Oe.e,{children:["Quantit\xe9 :",e.quantity,"\n"]}),Object(a.jsxs)(Oe.e,{children:["Prix unitaire : ",e.unit_price," \u20ac","\n"]})]},e.id+" "+t.id+" "+n)}))]},t.id)}))},ge=function(e){return Object(a.jsx)(Oe.a,{children:Object(a.jsx)(Oe.c,{size:"A4",style:xe.page,children:Object(a.jsxs)(Oe.f,{children:[Object(a.jsx)(Oe.f,{children:Object(a.jsx)(Oe.e,{style:{fontSize:"1.7cm",textAlign:"center"},children:"ALPHAPAR - Facture"})}),Object(a.jsxs)(Oe.e,{children:["Cr\xe9\xe9e le : ",e.invoice.created_at]}),Object(a.jsxs)(Oe.e,{children:["Pay\xe9e le : ",e.invoice.paid_at]}),e.orders?e.orders.map((function(t){return e.orderId===t.id?Object(a.jsxs)(Oe.e,{style:{marginTop:"20px"},children:[Object(a.jsxs)(Oe.e,{children:["Commande : ",t.id,"\n"]}),Object(a.jsxs)(Oe.e,{children:["Cr\xe9er le : ",t.created_at,"\n"]}),Object(a.jsx)(fe,{plans:e.plans,currentOrder:t})]},t.id):null})):null]})})})};var ve=function(e){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(Oe.b,{document:Object(a.jsx)(ge,{invoice:e.invoice,orders:e.orders,plans:e.plans,orderId:e.orderId}),fileName:"exportFacture.pdf",className:"btn-basic btn-basic-lg my-3",children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Loading document...":"Exporter la facture en PDF"}})})};function Ne(e){var t=Object(o.g)(),n=Object(c.useState)(0),i=Object(j.a)(n,2),r=i[0],s=i[1],l=Object(c.useState)(0),d=Object(j.a)(l,2),u=d[0],m=d[1],h=Object(c.useState)(null),p=Object(j.a)(h,2),O=p[0],x=p[1],f=Object(c.useState)(null),g=Object(j.a)(f,2),v=g[0],N=g[1],y=Object(c.useState)(null),C=Object(j.a)(y,2),w=C[0],S=C[1],k=Object(o.f)();Object(c.useEffect)((function(){localStorage.getItem("user_token")?(b.a.get("/order").then((function(e){return e.data.filter((function(e){return e.client_id===t.state.client.id}))})).then((function(e){x(e)})).catch((function(e){console.log("erreur, veuillez contacter Bigoune")})),b.a.get("/plan").then((function(e){S(e.data)})).catch((function(e){console.log("erreur, veuillez contacter Bigoune")}))):k.push("/authentification")}),[]),Object(c.useEffect)((function(){O&&b.a.get("/invoice").then((function(e){return e.data.filter((function(e){return O.map((function(e){return e.id})).includes(e.order_id)}))})).then((function(e){N(e)})).catch((function(e){console.log("erreur, veuillez contacter Bigoune")}))}),[O]);var P=function(e){return!!O&&(null===O||void 0===O?void 0:O.map((function(t,n){return e.order_id===t.id?Object(a.jsxs)("div",{className:"order-container",children:[Object(a.jsxs)("div",{className:"my-2",children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Command\xe9e le :"})," ",he(t.created_at)]}),Object(a.jsxs)("div",{className:"d-flex justify-content-center",children:[r!==e.invoice_id?Object(a.jsx)("button",{onClick:function(){return s(e.invoice_id)},children:"D\xe9tails"}):null,r===e.invoice_id?Object(a.jsx)(_,{currentOrder:t}):null]})]},n+"order"+t.id):null})))},_=function(e){if(!w)return!1;var t=w.filter((function(t){return e.currentOrder.plans.map((function(e){return e.plan_id})).includes(t.id)}));return!!t&&t.map((function(t,n){return Object(a.jsxs)("div",{className:"plan-container",children:[Object(a.jsx)("p",{style:{fontWeight:"bold"},children:t.name}),Object(a.jsxs)("p",{children:["Quantit\xe9 : ",e.currentOrder.plans[n].quantity]}),Object(a.jsxs)("p",{children:["Prix : ",e.currentOrder.plans[n].price," \u20ac"]}),Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsx)("h6",{children:"Pi\xe8ce(s)"}),t.pieces.map((function(e,n){return Object(a.jsxs)("div",{className:"piece-container",children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Nom : "}),e.name]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Quantit\xe9 : "}),e.quantity]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Prix unitaire : "}),e.unit_price," \u20ac"]})]},e.id+" "+t.id+" "+n)}))]})]},t.id)}))},I=function(e){return e.paidAt?Object(a.jsxs)("div",{children:["Pay\xe9e le : ",he(e.paidAt)]}):Object(a.jsx)("div",{className:"btn-basic btn-basic-sm",onClick:function(){return function(e){var t={invoice_id:e,paid:!0};b.a.put("/invoice",t).then((function(e){null!==e.data&&window.location.reload(!1)})).catch((function(e){alert(e)}))}(e.invoiceId)},children:"Payer la facture"})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:t.state.client.name}),Object(a.jsxs)("div",{className:"d-flex flex-column align-items-center pl-2",children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Adresse : "}),t.state.client.address]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Email : "}),t.state.client.email]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Num\xe9ro de t\xe9l\xe9phone : "}),t.state.client.phone]})]}),Object(a.jsxs)("div",{className:"d-flex justify-content-center flex-column align-items-center",children:[Object(a.jsx)("button",{className:"btn-basic btn-basic-sm my-3",onClick:function(){return m(!u)},children:"Voir les messages"}),u?Object(a.jsx)(pe,{id:t.state.client.id}):null]}),v?v.map((function(e,t){return Object(a.jsxs)("div",{className:"invoice-container p-2",children:[Object(a.jsxs)("h5",{children:["Facture ",t+1]}),Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(ve,{invoice:e,orders:O,plans:w,orderId:e.order_id})}),Object(a.jsx)(I,{invoiceId:e.id,paidAt:e.paid_at}),Object(a.jsxs)("div",{children:["Cr\xe9\xe9e le : ",he(e.created_at)]}),Object(a.jsx)("h5",{className:"mt-5",children:"Commandes"}),Object(a.jsx)("div",{className:"d-flex justify-content-around",children:Object(a.jsx)(P,{order_id:e.order_id,invoice_id:e.id})})]},e.id)})):null]})}function ye(){return Object(a.jsxs)(o.c,{children:[Object(a.jsx)(o.a,{path:"/clients",children:Object(a.jsx)(Z,{})}),Object(a.jsx)(o.a,{path:"/client/details",children:Object(a.jsx)(Ne,{})}),Object(a.jsx)(o.a,{path:"/modules",children:Object(a.jsx)(D,{})}),Object(a.jsx)(o.a,{path:"/pieces",children:Object(a.jsx)(_,{})}),Object(a.jsx)(o.a,{path:"/authentification",children:Object(a.jsx)(le,{})}),Object(a.jsx)(o.a,{path:"/",exact:!0,component:je}),Object(a.jsx)(o.a,{path:"/*",children:Object(a.jsx)(ue,{})})]})}var Ce,we=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(p,{children:Object(a.jsxs)(d.a,{children:[Object(a.jsx)(x,{}),Object(a.jsx)(ye,{})]})})})};m.defaults.baseURL="https://web.pierrehamel.fr/api",m.defaults.headers.common.Authorization="Bearer ".concat(null===(Ce=localStorage)||void 0===Ce?void 0:Ce.getItem("user_token")),m.defaults.headers.common["Access-Control-Allow-Origin"]="*",m.defaults.headers.common["Access-Control-Allow-Header"]="Content-Type, Authorization, Content-Length, X-Requested-With, Accept",r.a.render(Object(a.jsx)(we,{}),document.getElementById("root"))}},[[554,1,2]]]);
//# sourceMappingURL=main.58ab9491.chunk.js.map